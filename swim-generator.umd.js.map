{"version":3,"file":"swim-generator.umd.js","sources":["../lib/getThingViaTimeLimit.js","../lib/repeatIntervals.js","../lib/createPattern.js","../lib/index.js"],"sourcesContent":["import _ from 'lodash';\n\nexport function getThingViaTimeLimit(key, secondsLeft, things, number = 1) {\n  let filteredThings = _.filter(things, thing => (thing[key] * number) <= secondsLeft);\n  return _.sample(filteredThings);\n}\n","import _ from 'lodash';\nimport {getThingViaTimeLimit} from './getThingViaTimeLimit';\nimport swims from './data/swims.json';\n\nexport function repeatIntervals(secondsLeft, generatedPattern) {\n  if (secondsLeft < 20) {\n    // console.log(`weird amount of time left: ${secondsLeft}. returning original pattern`);\n    return generatedPattern;\n  }\n\n  // console.log('repeatIntervals');\n\n  let seconds = 0;\n  let selectedSwim = getThingViaTimeLimit(\"time\", secondsLeft, swims);\n\n  // console.log(`repeating interval of type ${selectedSwim.name}`)\n\n  while (seconds + selectedSwim.time <= secondsLeft) {\n    let timeLeft = secondsLeft - seconds;\n    let maxRepetition = Math.floor(timeLeft / selectedSwim.time);\n\n    // attempt to keep max length 200 or less\n    maxRepetition = (maxRepetition * selectedSwim.interval) > 8 ?\n      Math.floor(8 / selectedSwim.interval) :\n      maxRepetition;\n\n    let intervalLength = _.random(1, maxRepetition);\n    let secondsToAdd = selectedSwim.time * intervalLength;\n\n    // console.log('adding swim', selectedSwim);\n\n    seconds += secondsToAdd;\n    generatedPattern.seconds += secondsToAdd;\n    generatedPattern.intervals.push(\n      {\n        type: selectedSwim.name,\n        length: selectedSwim.interval * 25 * intervalLength,\n        number: 1,\n        time: secondsToAdd\n      }\n    );\n  }\n\n  return generatedPattern;\n}\n","import _ from 'lodash';\nimport swims from './data/swims.json';\n\nfunction getSwimByLength(secondsLeft, intervalLength, number) {\n  if (secondsLeft < 20 * number) {\n    // console.log(`weird amount of time left: ${secondsLeft}. returning null`);\n    return null;\n  }\n\n  let selectSwim;\n  let numThings = 0;\n\n  let filteredSwims = _.cloneDeep(swims);\n\n  while (!selectSwim) {\n    numThings++;\n    selectSwim = _.sample(filteredSwims);\n\n    if ((selectSwim.time * number) > secondsLeft) {\n      // console.log(`swim too long ${selectSwim.time} ${number} ${secondsLeft}`);\n      filteredSwims = _.filter(filteredSwims, swim => swim.time < selectSwim.time);\n      selectSwim = null;\n    } else if ((selectSwim.interval > intervalLength) || (intervalLength % selectSwim.interval !== 0)) {\n      // console.log(`interval too long ${selectSwim.interval} ${intervalLength}`);\n      filteredSwims = _.filter(filteredSwims, swim => swim.interval < selectSwim.interval);\n      selectSwim = null;\n    }\n\n    if (numThings > 20) {throw new Error(`fuck ${secondsLeft} ${intervalLength} ${number}`);}\n  }\n\n  return selectSwim;\n}\n\nfunction createSwimGroupCount(selectedPattern) {\n  return _.reduce(selectedPattern.pattern, (result, set) => {\n    let swimLength = set.interval[1];\n\n    if(!result[set.group]) {\n      result[set.group] = { number: 1, intervalLength: swimLength}\n    } else {\n      result[set.group].number += 1;\n      result[set.group].intervalLength = _.min([result[set.group].intervalLength, swimLength]);\n    }\n\n    return result;\n  }, {});\n}\n\nfunction mapSwimGroupsToSwims(secondsLeft, selectedPattern, groupsWithCount) {\n  let groupsWithSwim = {};\n\n  let sets = selectedPattern.pattern.length;\n\n  // Find a swim which will fit the pattern and the time remaining\n  _.forEach(groupsWithCount, (groupSize, key) => {\n    let intervalSize = selectedPattern.intervalSize;\n    let otherSetTimes = (sets - groupSize.number) * intervalSize * 20;\n    let selectedSwim = getSwimByLength(\n      secondsLeft - otherSetTimes,\n      groupSize.intervalLength,\n      groupSize.number * intervalSize\n    );\n\n    groupsWithSwim[key] = selectedSwim;\n  });\n\n  return groupsWithSwim;\n}\n\nexport function createSwimsFromPattern(secondsLeft, generatedPattern, selectedPattern) {\n  if (secondsLeft < 20) {\n    // console.log(`weird amount of time left: ${secondsLeft}. returning original pattern`);\n    return generatedPattern;\n  }\n\n  let groupsWithCount = createSwimGroupCount(selectedPattern);\n  let groupsWithSwim = mapSwimGroupsToSwims(secondsLeft, selectedPattern, groupsWithCount);\n\n  // once we've figured out which swims go where, generate the intervals\n  _.forEach(selectedPattern.pattern, pattern => {\n    let selectedSwim = groupsWithSwim[pattern.group];\n    let numIntervals = pattern.interval[0];\n    let swimLength = pattern.interval[1];\n\n    // Some swims are > 1 lap\n    let intervalMultiplier = swimLength / selectedSwim.interval;\n    let totalSwimTime = selectedSwim.time * numIntervals * (intervalMultiplier);\n\n    generatedPattern.seconds += totalSwimTime;\n    generatedPattern.intervals.push(\n      {\n        type: selectedSwim.name,\n        length: swimLength * 25,\n        number: numIntervals,\n        time: selectedSwim.time * intervalMultiplier\n      }\n    );\n  });\n\n  return generatedPattern;\n}\n","import _ from 'lodash';\nimport patterns from './data/patterns.json';\nimport {getThingViaTimeLimit} from './getThingViaTimeLimit';\nimport {repeatIntervals} from './repeatIntervals';\nimport {createSwimsFromPattern} from './createPattern';\n\nfunction isSameType(intervalA, intervalB) {\n  return intervalA.type === intervalB.type\n    && intervalA.length === intervalB.length\n    && intervalA.time === intervalB.time;\n}\n\nfunction doubleLengths(pattern) {\n  // console.log('doubleLengths');\n  pattern.seconds *= 2;\n\n  _.forEach(pattern.intervals, interval => {\n    interval.length *= 2;\n    interval.time *= 2;\n  });\n}\n\nfunction doubleIntervals(pattern) {\n  // console.log('doubleIntervals');\n  pattern.seconds *= 2;\n\n  _.forEach(pattern.intervals, interval => {\n    interval.number *= 2;\n  });\n}\n\nfunction condenseWorkout(pattern) {\n  pattern.intervals = pattern.intervals.reduce((memo, interval) => {\n    let intervalsLength = memo.length;\n\n    if(intervalsLength === 0) {\n      memo.push(interval);\n      return memo;\n    }\n\n    if (isSameType(memo[intervalsLength -1], interval)) {\n      // console.log('condensing', memo[intervalsLength - 1], interval);\n      memo[intervalsLength - 1].number += interval.number;\n    } else {\n      memo.push(interval)\n    }\n\n    return memo;\n  }, []);\n\n  // console.log(pattern);\n\n  return pattern;\n}\n\nexport function generatePattern(seconds, generatedPattern = { seconds: 0, intervals: [] }) {\n  if (seconds < 20) {\n    // console.log(`weird amount of time left: ${seconds}. returning generated pattern`);\n    return generatedPattern;\n  }\n\n  // console.log('generatePattern');\n\n  let timeLeft = seconds - generatedPattern.seconds;\n  let selectedPattern = getThingViaTimeLimit(\"minTime\", timeLeft, patterns);\n\n  // console.log(`attempting to generate ${selectedPattern.name} pattern, which needs ${selectedPattern.minTime}, and has ${timeLeft}`)\n\n  if (selectedPattern.repeat === true) {\n    return repeatIntervals(timeLeft, generatedPattern);\n  } else {\n    return createSwimsFromPattern(timeLeft, generatedPattern, selectedPattern);\n  }\n}\n\nexport function generateWorkout(seconds) {\n  if (!seconds) { throw new Error('Give me time!'); }\n\n  let pattern = generatePattern(seconds);\n\n  while ((pattern.seconds < (seconds / 2)) && (pattern.seconds >= 20)) {\n    switch(_.random(1,3)) {\n      case 1:\n        doubleLengths(pattern);\n        break;\n      case 2:\n        doubleIntervals(pattern);\n        break;\n      case 3:\n        // add new workout to pattern\n        generatePattern(seconds, pattern);\n        break;\n    }\n  }\n\n  while (seconds - pattern.seconds >= 20) {\n    generatePattern(seconds, pattern);\n  }\n\n  pattern = condenseWorkout(pattern);\n\n  return pattern;\n}\n"],"names":["getThingViaTimeLimit","key","secondsLeft","things","number","arguments","length","undefined","filteredThings","_","filter","thing","sample","repeatIntervals","generatedPattern","seconds","selectedSwim","swims","time","timeLeft","maxRepetition","Math","floor","interval","intervalLength","random","secondsToAdd","intervals","push","type","name","getSwimByLength","selectSwim","numThings","filteredSwims","cloneDeep","swim","Error","concat","createSwimGroupCount","selectedPattern","reduce","pattern","result","set","swimLength","group","min","mapSwimGroupsToSwims","groupsWithCount","groupsWithSwim","sets","forEach","groupSize","intervalSize","otherSetTimes","createSwimsFromPattern","numIntervals","intervalMultiplier","totalSwimTime","isSameType","intervalA","intervalB","doubleLengths","doubleIntervals","condenseWorkout","memo","intervalsLength","generatePattern","patterns","repeat","generateWorkout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAEO,SAASA,oBAAoBA,CAACC,GAAG,EAAEC,WAAW,EAAEC,MAAM,EAAc;EAAA,EAAA,IAAZC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,CAAC;IACvE,IAAIG,cAAc,GAAGC,CAAC,CAACC,MAAM,CAACP,MAAM,EAAE,UAAAQ,KAAK,EAAA;EAAA,IAAA,OAAKA,KAAK,CAACV,GAAG,CAAC,GAAGG,MAAM,IAAKF,WAAW;KAAC,CAAA;EACpF,EAAA,OAAOO,CAAC,CAACG,MAAM,CAACJ,cAAc,CAAC;EACjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECDO,SAASK,eAAeA,CAACX,WAAW,EAAEY,gBAAgB,EAAE;IAC7D,IAAIZ,WAAW,GAAG,EAAE,EAAE;EACpB;EACA,IAAA,OAAOY,gBAAgB;EACzB;;EAEA;;IAEA,IAAIC,OAAO,GAAG,CAAC;IACf,IAAIC,YAAY,GAAGhB,oBAAoB,CAAC,MAAM,EAAEE,WAAW,EAAEe,KAAK,CAAC;;EAEnE;;EAEA,EAAA,OAAOF,OAAO,GAAGC,YAAY,CAACE,IAAI,IAAIhB,WAAW,EAAE;EACjD,IAAA,IAAIiB,QAAQ,GAAGjB,WAAW,GAAGa,OAAO;MACpC,IAAIK,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACH,QAAQ,GAAGH,YAAY,CAACE,IAAI,CAAC;;EAE5D;MACAE,aAAa,GAAIA,aAAa,GAAGJ,YAAY,CAACO,QAAQ,GAAI,CAAC,GACzDF,IAAI,CAACC,KAAK,CAAC,CAAC,GAAGN,YAAY,CAACO,QAAQ,CAAC,GACrCH,aAAa;MAEf,IAAII,cAAc,GAAGf,CAAC,CAACgB,MAAM,CAAC,CAAC,EAAEL,aAAa,CAAC;EAC/C,IAAA,IAAIM,YAAY,GAAGV,YAAY,CAACE,IAAI,GAAGM,cAAc;;EAErD;;EAEAT,IAAAA,OAAO,IAAIW,YAAY;MACvBZ,gBAAgB,CAACC,OAAO,IAAIW,YAAY;EACxCZ,IAAAA,gBAAgB,CAACa,SAAS,CAACC,IAAI,CAC7B;QACEC,IAAI,EAAEb,YAAY,CAACc,IAAI;EACvBxB,MAAAA,MAAM,EAAEU,YAAY,CAACO,QAAQ,GAAG,EAAE,GAAGC,cAAc;EACnDpB,MAAAA,MAAM,EAAE,CAAC;EACTc,MAAAA,IAAI,EAAEQ;EACR,KACF,CAAC;EACH;EAEA,EAAA,OAAOZ,gBAAgB;EACzB;;ECzCA,SAASiB,eAAeA,CAAC7B,WAAW,EAAEsB,cAAc,EAAEpB,MAAM,EAAE;EAC5D,EAAA,IAAIF,WAAW,GAAG,EAAE,GAAGE,MAAM,EAAE;EAC7B;EACA,IAAA,OAAO,IAAI;EACb;EAEA,EAAA,IAAI4B,UAAU;IACd,IAAIC,SAAS,GAAG,CAAC;EAEjB,EAAA,IAAIC,aAAa,GAAGzB,CAAC,CAAC0B,SAAS,CAAClB,KAAK,CAAC;IAEtC,OAAO,CAACe,UAAU,EAAE;EAClBC,IAAAA,SAAS,EAAE;EACXD,IAAAA,UAAU,GAAGvB,CAAC,CAACG,MAAM,CAACsB,aAAa,CAAC;EAEpC,IAAA,IAAKF,UAAU,CAACd,IAAI,GAAGd,MAAM,GAAIF,WAAW,EAAE;EAC5C;QACAgC,aAAa,GAAGzB,CAAC,CAACC,MAAM,CAACwB,aAAa,EAAE,UAAAE,IAAI,EAAA;EAAA,QAAA,OAAIA,IAAI,CAAClB,IAAI,GAAGc,UAAU,CAACd,IAAI;SAAC,CAAA;EAC5Ec,MAAAA,UAAU,GAAG,IAAI;EACnB,KAAC,MAAM,IAAKA,UAAU,CAACT,QAAQ,GAAGC,cAAc,IAAMA,cAAc,GAAGQ,UAAU,CAACT,QAAQ,KAAK,CAAE,EAAE;EACjG;QACAW,aAAa,GAAGzB,CAAC,CAACC,MAAM,CAACwB,aAAa,EAAE,UAAAE,IAAI,EAAA;EAAA,QAAA,OAAIA,IAAI,CAACb,QAAQ,GAAGS,UAAU,CAACT,QAAQ;SAAC,CAAA;EACpFS,MAAAA,UAAU,GAAG,IAAI;EACnB;MAEA,IAAIC,SAAS,GAAG,EAAE,EAAE;EAAC,MAAA,MAAM,IAAII,KAAK,CAAAC,OAAAA,CAAAA,MAAA,CAASpC,WAAW,EAAA,GAAA,CAAA,CAAAoC,MAAA,CAAId,cAAc,EAAAc,GAAAA,CAAAA,CAAAA,MAAA,CAAIlC,MAAM,CAAE,CAAC;EAAC;EAC1F;EAEA,EAAA,OAAO4B,UAAU;EACnB;EAEA,SAASO,oBAAoBA,CAACC,eAAe,EAAE;EAC7C,EAAA,OAAO/B,CAAC,CAACgC,MAAM,CAACD,eAAe,CAACE,OAAO,EAAE,UAACC,MAAM,EAAEC,GAAG,EAAK;EACxD,IAAA,IAAIC,UAAU,GAAGD,GAAG,CAACrB,QAAQ,CAAC,CAAC,CAAC;EAEhC,IAAA,IAAG,CAACoB,MAAM,CAACC,GAAG,CAACE,KAAK,CAAC,EAAE;EACrBH,MAAAA,MAAM,CAACC,GAAG,CAACE,KAAK,CAAC,GAAG;EAAE1C,QAAAA,MAAM,EAAE,CAAC;EAAEoB,QAAAA,cAAc,EAAEqB;SAAW;EAC9D,KAAC,MAAM;QACLF,MAAM,CAACC,GAAG,CAACE,KAAK,CAAC,CAAC1C,MAAM,IAAI,CAAC;QAC7BuC,MAAM,CAACC,GAAG,CAACE,KAAK,CAAC,CAACtB,cAAc,GAAGf,CAAC,CAACsC,GAAG,CAAC,CAACJ,MAAM,CAACC,GAAG,CAACE,KAAK,CAAC,CAACtB,cAAc,EAAEqB,UAAU,CAAC,CAAC;EAC1F;EAEA,IAAA,OAAOF,MAAM;KACd,EAAE,EAAE,CAAC;EACR;EAEA,SAASK,oBAAoBA,CAAC9C,WAAW,EAAEsC,eAAe,EAAES,eAAe,EAAE;IAC3E,IAAIC,cAAc,GAAG,EAAE;EAEvB,EAAA,IAAIC,IAAI,GAAGX,eAAe,CAACE,OAAO,CAACpC,MAAM;;EAEzC;IACAG,CAAC,CAAC2C,OAAO,CAACH,eAAe,EAAE,UAACI,SAAS,EAAEpD,GAAG,EAAK;EAC7C,IAAA,IAAIqD,YAAY,GAAGd,eAAe,CAACc,YAAY;MAC/C,IAAIC,aAAa,GAAG,CAACJ,IAAI,GAAGE,SAAS,CAACjD,MAAM,IAAIkD,YAAY,GAAG,EAAE;EACjE,IAAA,IAAItC,YAAY,GAAGe,eAAe,CAChC7B,WAAW,GAAGqD,aAAa,EAC3BF,SAAS,CAAC7B,cAAc,EACxB6B,SAAS,CAACjD,MAAM,GAAGkD,YACrB,CAAC;EAEDJ,IAAAA,cAAc,CAACjD,GAAG,CAAC,GAAGe,YAAY;EACpC,GAAC,CAAC;EAEF,EAAA,OAAOkC,cAAc;EACvB;EAEO,SAASM,sBAAsBA,CAACtD,WAAW,EAAEY,gBAAgB,EAAE0B,eAAe,EAAE;IACrF,IAAItC,WAAW,GAAG,EAAE,EAAE;EACpB;EACA,IAAA,OAAOY,gBAAgB;EACzB;EAEA,EAAA,IAAImC,eAAe,GAAGV,oBAAoB,CAACC,eAAe,CAAC;IAC3D,IAAIU,cAAc,GAAGF,oBAAoB,CAAC9C,WAAW,EAAEsC,eAAe,EAAES,eAAe,CAAC;;EAExF;IACAxC,CAAC,CAAC2C,OAAO,CAACZ,eAAe,CAACE,OAAO,EAAE,UAAAA,OAAO,EAAI;EAC5C,IAAA,IAAI1B,YAAY,GAAGkC,cAAc,CAACR,OAAO,CAACI,KAAK,CAAC;EAChD,IAAA,IAAIW,YAAY,GAAGf,OAAO,CAACnB,QAAQ,CAAC,CAAC,CAAC;EACtC,IAAA,IAAIsB,UAAU,GAAGH,OAAO,CAACnB,QAAQ,CAAC,CAAC,CAAC;;EAEpC;EACA,IAAA,IAAImC,kBAAkB,GAAGb,UAAU,GAAG7B,YAAY,CAACO,QAAQ;MAC3D,IAAIoC,aAAa,GAAG3C,YAAY,CAACE,IAAI,GAAGuC,YAAY,GAAIC,kBAAmB;MAE3E5C,gBAAgB,CAACC,OAAO,IAAI4C,aAAa;EACzC7C,IAAAA,gBAAgB,CAACa,SAAS,CAACC,IAAI,CAC7B;QACEC,IAAI,EAAEb,YAAY,CAACc,IAAI;QACvBxB,MAAM,EAAEuC,UAAU,GAAG,EAAE;EACvBzC,MAAAA,MAAM,EAAEqD,YAAY;EACpBvC,MAAAA,IAAI,EAAEF,YAAY,CAACE,IAAI,GAAGwC;EAC5B,KACF,CAAC;EACH,GAAC,CAAC;EAEF,EAAA,OAAO5C,gBAAgB;EACzB;;EC/FA,SAAS8C,UAAUA,CAACC,SAAS,EAAEC,SAAS,EAAE;IACxC,OAAOD,SAAS,CAAChC,IAAI,KAAKiC,SAAS,CAACjC,IAAI,IACnCgC,SAAS,CAACvD,MAAM,KAAKwD,SAAS,CAACxD,MAAM,IACrCuD,SAAS,CAAC3C,IAAI,KAAK4C,SAAS,CAAC5C,IAAI;EACxC;EAEA,SAAS6C,aAAaA,CAACrB,OAAO,EAAE;EAC9B;IACAA,OAAO,CAAC3B,OAAO,IAAI,CAAC;IAEpBN,CAAC,CAAC2C,OAAO,CAACV,OAAO,CAACf,SAAS,EAAE,UAAAJ,QAAQ,EAAI;MACvCA,QAAQ,CAACjB,MAAM,IAAI,CAAC;MACpBiB,QAAQ,CAACL,IAAI,IAAI,CAAC;EACpB,GAAC,CAAC;EACJ;EAEA,SAAS8C,eAAeA,CAACtB,OAAO,EAAE;EAChC;IACAA,OAAO,CAAC3B,OAAO,IAAI,CAAC;IAEpBN,CAAC,CAAC2C,OAAO,CAACV,OAAO,CAACf,SAAS,EAAE,UAAAJ,QAAQ,EAAI;MACvCA,QAAQ,CAACnB,MAAM,IAAI,CAAC;EACtB,GAAC,CAAC;EACJ;EAEA,SAAS6D,eAAeA,CAACvB,OAAO,EAAE;EAChCA,EAAAA,OAAO,CAACf,SAAS,GAAGe,OAAO,CAACf,SAAS,CAACc,MAAM,CAAC,UAACyB,IAAI,EAAE3C,QAAQ,EAAK;EAC/D,IAAA,IAAI4C,eAAe,GAAGD,IAAI,CAAC5D,MAAM;MAEjC,IAAG6D,eAAe,KAAK,CAAC,EAAE;EACxBD,MAAAA,IAAI,CAACtC,IAAI,CAACL,QAAQ,CAAC;EACnB,MAAA,OAAO2C,IAAI;EACb;MAEA,IAAIN,UAAU,CAACM,IAAI,CAACC,eAAe,GAAE,CAAC,CAAC,EAAE5C,QAAQ,CAAC,EAAE;EAClD;QACA2C,IAAI,CAACC,eAAe,GAAG,CAAC,CAAC,CAAC/D,MAAM,IAAImB,QAAQ,CAACnB,MAAM;EACrD,KAAC,MAAM;EACL8D,MAAAA,IAAI,CAACtC,IAAI,CAACL,QAAQ,CAAC;EACrB;EAEA,IAAA,OAAO2C,IAAI;KACZ,EAAE,EAAE,CAAC;;EAEN;;EAEA,EAAA,OAAOxB,OAAO;EAChB;EAEO,SAAS0B,eAAeA,CAACrD,OAAO,EAAoD;IAAA,IAAlDD,gBAAgB,GAAAT,SAAA,CAAAC,MAAA,GAAAD,CAAAA,IAAAA,SAAA,CAAAE,CAAAA,CAAAA,KAAAA,SAAA,GAAAF,SAAA,CAAG,CAAA,CAAA,GAAA;EAAEU,IAAAA,OAAO,EAAE,CAAC;EAAEY,IAAAA,SAAS,EAAE;KAAI;IACvF,IAAIZ,OAAO,GAAG,EAAE,EAAE;EAChB;EACA,IAAA,OAAOD,gBAAgB;EACzB;;EAEA;;EAEA,EAAA,IAAIK,QAAQ,GAAGJ,OAAO,GAAGD,gBAAgB,CAACC,OAAO;IACjD,IAAIyB,eAAe,GAAGxC,oBAAoB,CAAC,SAAS,EAAEmB,QAAQ,EAAEkD,QAAQ,CAAC;;EAEzE;;EAEA,EAAA,IAAI7B,eAAe,CAAC8B,MAAM,KAAK,IAAI,EAAE;EACnC,IAAA,OAAOzD,eAAe,CAACM,QAAQ,EAAEL,gBAAgB,CAAC;EACpD,GAAC,MAAM;EACL,IAAA,OAAO0C,sBAAsB,CAACrC,QAAQ,EAAEL,gBAAgB,EAAE0B,eAAe,CAAC;EAC5E;EACF;EAEO,SAAS+B,eAAeA,CAACxD,OAAO,EAAE;IACvC,IAAI,CAACA,OAAO,EAAE;EAAE,IAAA,MAAM,IAAIsB,KAAK,CAAC,eAAe,CAAC;EAAE;EAElD,EAAA,IAAIK,OAAO,GAAG0B,eAAe,CAACrD,OAAO,CAAC;EAEtC,EAAA,OAAQ2B,OAAO,CAAC3B,OAAO,GAAIA,OAAO,GAAG,CAAE,IAAM2B,OAAO,CAAC3B,OAAO,IAAI,EAAG,EAAE;EACnE,IAAA,QAAON,CAAC,CAACgB,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;EAClB,MAAA,KAAK,CAAC;UACJsC,aAAa,CAACrB,OAAO,CAAC;EACtB,QAAA;EACF,MAAA,KAAK,CAAC;UACJsB,eAAe,CAACtB,OAAO,CAAC;EACxB,QAAA;EACF,MAAA,KAAK,CAAC;EACJ;EACA0B,QAAAA,eAAe,CAACrD,OAAO,EAAE2B,OAAO,CAAC;EACjC,QAAA;EACJ;EACF;EAEA,EAAA,OAAO3B,OAAO,GAAG2B,OAAO,CAAC3B,OAAO,IAAI,EAAE,EAAE;EACtCqD,IAAAA,eAAe,CAACrD,OAAO,EAAE2B,OAAO,CAAC;EACnC;EAEAA,EAAAA,OAAO,GAAGuB,eAAe,CAACvB,OAAO,CAAC;EAElC,EAAA,OAAOA,OAAO;EAChB;;;;;;;;;"}