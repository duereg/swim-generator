{"version":3,"file":"swim-generator.es6.js","sources":["../lib/getThingViaTimeLimit.js","../lib/repeatIntervals.js","../lib/createPattern.js","../lib/index.js"],"sourcesContent":["import _ from 'lodash';\n\nexport function getThingViaTimeLimit(key, secondsLeft, things, number = 1) {\n  let filteredThings = _.filter(things, thing => (thing[key] * number) <= secondsLeft);\n  return _.sample(filteredThings);\n}\n","import _ from 'lodash';\nimport {getThingViaTimeLimit} from './getThingViaTimeLimit';\nimport swims from './data/swims.json';\n\nexport function repeatIntervals(secondsLeft, generatedPattern) {\n  if (secondsLeft < 20) {\n    // console.log(`weird amount of time left: ${secondsLeft}. returning original pattern`);\n    return generatedPattern;\n  }\n\n  // console.log('repeatIntervals');\n\n  let seconds = 0;\n  let selectedSwim = getThingViaTimeLimit(\"time\", secondsLeft, swims);\n\n  // console.log(`repeating interval of type ${selectedSwim.name}`)\n\n  while (seconds + selectedSwim.time <= secondsLeft) {\n    let timeLeft = secondsLeft - seconds;\n    let maxRepetition = Math.floor(timeLeft / selectedSwim.time);\n\n    // attempt to keep max length 200 or less\n    maxRepetition = (maxRepetition * selectedSwim.interval) > 8 ?\n      Math.floor(8 / selectedSwim.interval) :\n      maxRepetition;\n\n    let intervalLength = _.random(1, maxRepetition);\n    let secondsToAdd = selectedSwim.time * intervalLength;\n\n    // console.log('adding swim', selectedSwim);\n\n    seconds += secondsToAdd;\n    generatedPattern.seconds += secondsToAdd;\n    generatedPattern.intervals.push(\n      {\n        type: selectedSwim.name,\n        length: selectedSwim.interval * 25 * intervalLength,\n        number: 1,\n        time: secondsToAdd\n      }\n    );\n  }\n\n  return generatedPattern;\n}\n","import _ from 'lodash';\nimport swims from './data/swims.json';\n\nfunction getSwimByLength(secondsLeft, intervalLength, number) {\n  if (secondsLeft < 20 * number) {\n    // console.log(`weird amount of time left: ${secondsLeft}. returning null`);\n    return null;\n  }\n\n  let selectSwim;\n  let numThings = 0;\n\n  let filteredSwims = _.cloneDeep(swims);\n\n  while (!selectSwim) {\n    numThings++;\n    selectSwim = _.sample(filteredSwims);\n\n    if ((selectSwim.time * number) > secondsLeft) {\n      // console.log(`swim too long ${selectSwim.time} ${number} ${secondsLeft}`);\n      filteredSwims = _.filter(filteredSwims, swim => swim.time < selectSwim.time);\n      selectSwim = null;\n    } else if ((selectSwim.interval > intervalLength) || (intervalLength % selectSwim.interval !== 0)) {\n      // console.log(`interval too long ${selectSwim.interval} ${intervalLength}`);\n      filteredSwims = _.filter(filteredSwims, swim => swim.interval < selectSwim.interval);\n      selectSwim = null;\n    }\n\n    if (numThings > 20) {throw new Error(`fuck ${secondsLeft} ${intervalLength} ${number}`);}\n  }\n\n  return selectSwim;\n}\n\nfunction createSwimGroupCount(selectedPattern) {\n  return _.reduce(selectedPattern.pattern, (result, set) => {\n    let swimLength = set.interval[1];\n\n    if(!result[set.group]) {\n      result[set.group] = { number: 1, intervalLength: swimLength}\n    } else {\n      result[set.group].number += 1;\n      result[set.group].intervalLength = _.min([result[set.group].intervalLength, swimLength]);\n    }\n\n    return result;\n  }, {});\n}\n\nfunction mapSwimGroupsToSwims(secondsLeft, selectedPattern, groupsWithCount) {\n  let groupsWithSwim = {};\n\n  let sets = selectedPattern.pattern.length;\n\n  // Find a swim which will fit the pattern and the time remaining\n  _.forEach(groupsWithCount, (groupSize, key) => {\n    let intervalSize = selectedPattern.intervalSize;\n    let otherSetTimes = (sets - groupSize.number) * intervalSize * 20;\n    let selectedSwim = getSwimByLength(\n      secondsLeft - otherSetTimes,\n      groupSize.intervalLength,\n      groupSize.number * intervalSize\n    );\n\n    groupsWithSwim[key] = selectedSwim;\n  });\n\n  return groupsWithSwim;\n}\n\nexport function createSwimsFromPattern(secondsLeft, generatedPattern, selectedPattern) {\n  if (secondsLeft < 20) {\n    // console.log(`weird amount of time left: ${secondsLeft}. returning original pattern`);\n    return generatedPattern;\n  }\n\n  let groupsWithCount = createSwimGroupCount(selectedPattern);\n  let groupsWithSwim = mapSwimGroupsToSwims(secondsLeft, selectedPattern, groupsWithCount);\n\n  // once we've figured out which swims go where, generate the intervals\n  _.forEach(selectedPattern.pattern, pattern => {\n    let selectedSwim = groupsWithSwim[pattern.group];\n    let numIntervals = pattern.interval[0];\n    let swimLength = pattern.interval[1];\n\n    // Some swims are > 1 lap\n    let intervalMultiplier = swimLength / selectedSwim.interval;\n    let totalSwimTime = selectedSwim.time * numIntervals * (intervalMultiplier);\n\n    generatedPattern.seconds += totalSwimTime;\n    generatedPattern.intervals.push(\n      {\n        type: selectedSwim.name,\n        length: swimLength * 25,\n        number: numIntervals,\n        time: selectedSwim.time * intervalMultiplier\n      }\n    );\n  });\n\n  return generatedPattern;\n}\n","import _ from 'lodash';\nimport patterns from './data/patterns.json';\nimport {getThingViaTimeLimit} from './getThingViaTimeLimit';\nimport {repeatIntervals} from './repeatIntervals';\nimport {createSwimsFromPattern} from './createPattern';\n\nfunction isSameType(intervalA, intervalB) {\n  return intervalA.type === intervalB.type\n    && intervalA.length === intervalB.length\n    && intervalA.time === intervalB.time;\n}\n\nfunction doubleLengths(pattern) {\n  // console.log('doubleLengths');\n  pattern.seconds *= 2;\n\n  _.forEach(pattern.intervals, interval => {\n    interval.length *= 2;\n    interval.time *= 2;\n  });\n}\n\nfunction doubleIntervals(pattern) {\n  // console.log('doubleIntervals');\n  pattern.seconds *= 2;\n\n  _.forEach(pattern.intervals, interval => {\n    interval.number *= 2;\n  });\n}\n\nfunction condenseWorkout(pattern) {\n  pattern.intervals = pattern.intervals.reduce((memo, interval) => {\n    let intervalsLength = memo.length;\n\n    if(intervalsLength === 0) {\n      memo.push(interval);\n      return memo;\n    }\n\n    if (isSameType(memo[intervalsLength -1], interval)) {\n      // console.log('condensing', memo[intervalsLength - 1], interval);\n      memo[intervalsLength - 1].number += interval.number;\n    } else {\n      memo.push(interval)\n    }\n\n    return memo;\n  }, []);\n\n  // console.log(pattern);\n\n  return pattern;\n}\n\nexport function generatePattern(seconds, generatedPattern = { seconds: 0, intervals: [] }) {\n  if (seconds < 20) {\n    // console.log(`weird amount of time left: ${seconds}. returning generated pattern`);\n    return generatedPattern;\n  }\n\n  // console.log('generatePattern');\n\n  let timeLeft = seconds - generatedPattern.seconds;\n  let selectedPattern = getThingViaTimeLimit(\"minTime\", timeLeft, patterns);\n\n  // console.log(`attempting to generate ${selectedPattern.name} pattern, which needs ${selectedPattern.minTime}, and has ${timeLeft}`)\n\n  if (selectedPattern.repeat === true) {\n    return repeatIntervals(timeLeft, generatedPattern);\n  } else {\n    return createSwimsFromPattern(timeLeft, generatedPattern, selectedPattern);\n  }\n}\n\nexport function generateWorkout(seconds) {\n  if (!seconds) { throw new Error('Give me time!'); }\n\n  let pattern = generatePattern(seconds);\n\n  while ((pattern.seconds < (seconds / 2)) && (pattern.seconds >= 20)) {\n    switch(_.random(1,3)) {\n      case 1:\n        doubleLengths(pattern);\n        break;\n      case 2:\n        doubleIntervals(pattern);\n        break;\n      case 3:\n        // add new workout to pattern\n        generatePattern(seconds, pattern);\n        break;\n    }\n  }\n\n  while (seconds - pattern.seconds >= 20) {\n    generatePattern(seconds, pattern);\n  }\n\n  pattern = condenseWorkout(pattern);\n\n  return pattern;\n}\n"],"names":["getThingViaTimeLimit","key","secondsLeft","things","number","arguments","length","undefined","filteredThings","_","filter","thing","sample","repeatIntervals","generatedPattern","seconds","selectedSwim","swims","time","timeLeft","maxRepetition","Math","floor","interval","intervalLength","random","secondsToAdd","intervals","push","type","name","getSwimByLength","selectSwim","numThings","filteredSwims","cloneDeep","swim","Error","concat","createSwimGroupCount","selectedPattern","reduce","pattern","result","set","swimLength","group","min","mapSwimGroupsToSwims","groupsWithCount","groupsWithSwim","sets","forEach","groupSize","intervalSize","otherSetTimes","createSwimsFromPattern","numIntervals","intervalMultiplier","totalSwimTime","isSameType","intervalA","intervalB","doubleLengths","doubleIntervals","condenseWorkout","memo","intervalsLength","generatePattern","patterns","repeat","generateWorkout"],"mappings":"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"}